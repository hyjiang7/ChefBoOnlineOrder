{"ast":null,"code":"import _regeneratorRuntime from \"/Users/helenjiang/Desktop/ChefBoOnline/ChefBoOnlineOrder/chefbo/node_modules/@babel/runtime/regenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"/Users/helenjiang/Desktop/ChefBoOnline/ChefBoOnlineOrder/chefbo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/helenjiang/Desktop/ChefBoOnline/ChefBoOnlineOrder/chefbo/pages/routes/checkout.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport moment from \"moment\";\nimport momentz from \"moment-timezone\";\nimport store from \"../../state/GlobalState\";\nimport router, { useRouter } from \"next/router\";\nimport { addCustomerInfo, setTips } from \"../../state/Actions\";\nvar FULL12FORMAT = \"dddd MM-DD-YY HH:mm\";\nvar DATEFORMAT = \"dddd MM-DD-YY\";\nvar TIMEZONE = \"America/Los_Angeles\";\n\nvar checkout = function checkout() {\n  _s();\n\n  // const closedDays = [\"11/25/2021\", \"12/25/2021\", \"07/04/2022\"]\n  var lunch = store.getState().lunchInCart > 0;\n  var lunchSpecialHours = [[], [\"11:00\", \"15:00\"], [\"11:00\", \"15:00\"], [\"11:00\", \"15:00\"], [\"11:00\", \"15:00\"], [\"11:00\", \"15:00\"], [\"12:00\", \"15:00\"]];\n  var hoursOfOperation = [[], //change!!!\n  [\"11:00\", \"15:00\", \"16:30\", \"21:00\"], [\"11:00\", \"15:00\", \"16:30\", \"21:00\"], [\"11:00\", \"15:00\", \"16:30\", \"21:00\"], [\"11:00\", \"15:00\", \"16:30\", \"21:00\"], [\"11:00\", \"15:00\", \"16:30\", \"21:30\"], [\"12:00\", \"15:00\", \"16:30\", \"21:30\"]];\n  if (lunch > 0) hoursOfOperation = lunchSpecialHours;\n  var today = moment(moment()).tz(TIMEZONE);\n  var day = today.day(); //number\n\n  var date = today.format(DATEFORMAT); //string\n\n  var todayClose2 = moment.tz(\"\".concat(date, \" \").concat(hoursOfOperation[day][hoursOfOperation[day].length - 1]), FULL12FORMAT, TIMEZONE);\n  var open = today.isBefore(todayClose2);\n  var validTimesOne = [];\n  var validDays = [];\n  var validTimesTwo = [];\n  var dateOne;\n  var dateTwo;\n  var dateTwoDay;\n  var dayOneOpen1, dayOneClose1, dayOneOpen2, dayOneClose2;\n  var dayTwoOpen1, dayTwoClose1, dayTwoOpen2, dayTwoClose2; //today is open!\n\n  if (open) {\n    validDays.push(\"Today (\".concat(date, \")\"));\n    dateOne = date;\n    dayOneOpen1 = moment.tz(\"\".concat(dateOne, \" \").concat(hoursOfOperation[day][0]), FULL12FORMAT, TIMEZONE);\n    dayOneClose1 = moment.tz(\"\".concat(dateOne, \" \").concat(hoursOfOperation[day][1]), FULL12FORMAT, TIMEZONE);\n    dayOneOpen2 = moment.tz(\"\".concat(dateOne, \" \").concat(hoursOfOperation[day][2]), FULL12FORMAT, TIMEZONE);\n    dayOneClose2 = moment.tz(\"\".concat(dateOne, \" \").concat(hoursOfOperation[day][3]), FULL12FORMAT, TIMEZONE);\n    day == 6 ? dateTwo = today.add(2, \"days\") : dateTwo = today.add(1, \"days\");\n    dateTwoDay = dateTwo.day();\n    dateTwo = dateTwo.format(DATEFORMAT);\n    validDays.push(dateTwo);\n    dayTwoOpen1 = moment.tz(\"\".concat(dateTwo, \" \").concat(hoursOfOperation[dateTwoDay][0]), FULL12FORMAT, TIMEZONE);\n    dayTwoClose1 = moment.tz(\"\".concat(dateTwo, \" \").concat(hoursOfOperation[dateTwoDay][1]), FULL12FORMAT, TIMEZONE);\n    dayTwoOpen2 = moment.tz(\"\".concat(dateTwo, \" \").concat(hoursOfOperation[dateTwoDay][2]), FULL12FORMAT, TIMEZONE);\n    dayTwoClose2 = moment.tz(\"\".concat(dateTwo, \" \").concat(hoursOfOperation[dateTwoDay][3]), FULL12FORMAT, TIMEZONE);\n    today = moment(moment()).tz(TIMEZONE); //reset today\n\n    if (today.isBefore(dayOneOpen1)) {\n      //store still open today\n      validTimesOne = availablePickUpTimes(dayOneOpen1, dayOneClose1);\n    } else {\n      validTimesOne = availablePickUpTimes(today, dayOneClose1);\n    }\n\n    validTimesOne = validTimesOne.concat(availablePickUpTimes(dayOneOpen2, dayOneClose2));\n    validTimesTwo = availablePickUpTimes(dayTwoOpen1, dayTwoClose1);\n    validTimesTwo = validTimesTwo.concat(availablePickUpTimes(dayTwoOpen2, dayTwoClose2));\n  } else {\n    day == 6 ? dateOne = today.add(2, \"days\") : dateOne = today.add(1, \"days\");\n    day = dateOne.day();\n    dateOne = dateOne.format(DATEFORMAT);\n    validDays.push(dateOne);\n    dayOneOpen1 = moment.tz(\"\".concat(dateOne, \" \").concat(hoursOfOperation[day][0]), FULL12FORMAT, TIMEZONE);\n    dayOneClose1 = moment.tz(\"\".concat(dateOne, \" \").concat(hoursOfOperation[day][1]), FULL12FORMAT, TIMEZONE);\n    dayOneOpen2 = moment.tz(\"\".concat(dateOne, \" \").concat(hoursOfOperation[day][2]), FULL12FORMAT, TIMEZONE);\n    dayOneClose2 = moment.tz(\"\".concat(dateOne, \" \").concat(hoursOfOperation[day][3]), FULL12FORMAT, TIMEZONE);\n    dateTwo = today.add(1, \"days\");\n    dateTwoDay = dateTwo.day();\n    dateTwo = dateTwo.format(DATEFORMAT);\n    validDays.push(dateTwo);\n    dayTwoOpen1 = moment.tz(\"\".concat(dateTwo, \" \").concat(hoursOfOperation[dateTwoDay][0]), FULL12FORMAT, TIMEZONE);\n    dayTwoClose1 = moment.tz(\"\".concat(dateTwo, \" \").concat(hoursOfOperation[dateTwoDay][1]), FULL12FORMAT, TIMEZONE);\n    dayTwoOpen2 = moment.tz(\"\".concat(dateTwo, \" \").concat(hoursOfOperation[dateTwoDay][2]), FULL12FORMAT, TIMEZONE);\n    dayTwoClose2 = moment.tz(\"\".concat(dateTwo, \" \").concat(hoursOfOperation[dateTwoDay][3]), FULL12FORMAT, TIMEZONE);\n    validTimesOne = availablePickUpTimes(dayOneOpen1, dayOneClose1);\n    validTimesOne = validTimesOne.concat(availablePickUpTimes(dayOneOpen2, dayOneClose2));\n    validTimesTwo = availablePickUpTimes(dayTwoOpen1, dayTwoClose1);\n    validTimesTwo = validTimesTwo.concat(availablePickUpTimes(dayTwoOpen2, dayTwoClose2));\n  }\n\n  function availablePickUpTimes(startTime, endTime) {\n    var timeArr = [];\n    var mins = 15 - startTime.minute() % 15;\n    var firstTime = startTime.add(mins, \"m\");\n    mins == 15 ? null : firstTime.add(15, \"m\");\n\n    while (firstTime.isBefore(endTime)) {\n      timeArr.push(new moment(firstTime).format(\"h:mm a\"));\n      firstTime.add(15, \"m\");\n    }\n\n    return timeArr;\n  }\n\n  var tipsPercent = [0, 12, 15, 18, 20, 22];\n\n  function calcTips() {\n    var _store$getState = store.getState(),\n        subtotal = _store$getState.subtotal;\n\n    var tips = [];\n    tipsPercent.forEach(function (i) {\n      tips.push((subtotal * (i / 100)).toFixed(2));\n    });\n    console.log(tips);\n    return tips;\n  }\n\n  var _useState = useState(0),\n      dateChange = _useState[0],\n      setDateChange = _useState[1];\n\n  var _useState2 = useState(validTimesOne),\n      times = _useState2[0],\n      setTimes = _useState2[1];\n\n  var _useState3 = useState(validTimesOne[0]),\n      timeChange = _useState3[0],\n      setTime = _useState3[1];\n\n  var _useState4 = useState([\"\"]),\n      tipsSelection = _useState4[0],\n      SetTipsSelection = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      fnameError = _useState5[0],\n      setFnameError = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      lnameError = _useState6[0],\n      setLnameError = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      emailError = _useState7[0],\n      setEmailError = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      phoneError = _useState8[0],\n      setPhoneError = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      tipsError = _useState9[0],\n      setTipsError = _useState9[1];\n\n  useEffect(function () {\n    SetTipsSelection(calcTips());\n    dateChange == 0 ? setTimes(validTimesOne) : setTimes(validTimesTwo);\n  }, [dateChange]);\n\n  function handleDateChange(e) {\n    setDateChange(e.target.value);\n  }\n\n  function handleTimeChange(e) {\n    setTime(e.target.value);\n  }\n\n  function reviewOrder(_x) {\n    return _reviewOrder.apply(this, arguments);\n  }\n\n  function _reviewOrder() {\n    _reviewOrder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var tips, fname, lname, email, phone, req, validEmail, customer;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              //check if payment is valid\n              e.preventDefault();\n              tips = e.target.form.elements.tips.value;\n              fname = e.target.form.elements.fname.value;\n              lname = e.target.form.elements.lname.value;\n              email = e.target.form.elements.email.value;\n              phone = e.target.form.elements.phone.value;\n\n              if (!(!fname || !lname || !email || !phone || !tips)) {\n                _context.next = 23;\n                break;\n              }\n\n              if (!fname) {\n                setFnameError(\"Required!!\");\n              } else {\n                setFnameError(\"\");\n              }\n\n              if (!lname) {\n                setLnameError(\"Required!!\");\n              } else {\n                setLnameError(\"Required!!\");\n              }\n\n              if (email) {\n                _context.next = 13;\n                break;\n              }\n\n              setEmailError(\"Required!!\");\n              _context.next = 19;\n              break;\n\n            case 13:\n              req = fetch('http://localhost:5001/validate-email', {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(email)\n              });\n              _context.next = 16;\n              return req.json();\n\n            case 16:\n              validEmail = _context.sent;\n              console.log(validEmail);\n\n              if (!validEmail) {\n                setEmailError(\"Invalid Email\");\n              } else {\n                setEmailError(\"\");\n              }\n\n            case 19:\n              if (!phone) {\n                setPhoneError(\"Required!!\");\n              } else {\n                setPhoneError(\"\");\n              }\n\n              if (!tips) {\n                setTipsError(\"Required!!\");\n              } else {\n                setTipsError(\"\");\n              }\n\n              _context.next = 33;\n              break;\n\n            case 23:\n              setFnameError(\"\");\n              setLnameError(\"\");\n              setEmailError(\"\");\n              setPhoneError(\"\");\n              setTipsError(\"\");\n              customer = {\n                fname: fname,\n                lname: lname,\n                email: email,\n                phone: phone,\n                time: timeChange\n              };\n              dateChange == 0 ? customer.date = dateOne : customer.date = dateTwo;\n              store.dispatch(setTips(parseFloat(tips)));\n              store.dispatch(addCustomerInfo(customer));\n              router.push(\"/routes/submit\");\n\n            case 33:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _reviewOrder.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-12 col-sm-8 col-lg-6 m-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"\",\n          htmlFor: \"day\",\n          children: \"Select Pick Up Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"day\",\n          className: \"form-control\",\n          onChange: handleDateChange,\n          children: validDays.map(function (i, ind) {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: ind,\n              children: i\n            }, ind, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"\",\n          htmlFor: \"time\",\n          children: \"Select a Time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"time\",\n          className: \"form-control\",\n          onChange: handleTimeChange,\n          children: times.map(function (i, ind) {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\".concat(i),\n              children: i\n            }, ind, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"fname\",\n            children: [\" First Name* \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-danger\",\n              children: lnameError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 49\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"fname\",\n            type: \"text\",\n            className: \"form-control\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"lname\",\n            children: [\" Last Name* \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-danger\",\n              children: fnameError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 48\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"lname\",\n            type: \"text\",\n            className: \"form-control\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: [\" Email* \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: emailError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 42\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          id: \"email\",\n          type: \"email\",\n          pattern: \"^[a-zA-Z0-9.!#$%&\\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\\\.[a-zA-Z0-9-]+)*$\",\n          className: \"form-control\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"phone\",\n          children: [\" Phone number (digits only)* \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: phoneError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 63\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"phone\",\n          name: \"phone\",\n          type: \"tel\",\n          pattern: \"[0-9]{3}[0-9]{3}[0-9]{4}\",\n          className: \"form-control\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Select Tip Amount \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: tipsError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 34\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: tipsSelection.map(function (i, ind) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-check w-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-check-input\",\n                name: \"tips\",\n                id: i,\n                type: \"radio\",\n                value: i,\n                \"aria-label\": \"Radio tips amount \".concat(tipsPercent[ind], \"%\"),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\".concat(i, \" (\").concat(tipsPercent[ind], \"%)\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 21\n              }, _this)]\n            }, ind, true, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group d-flex justify-content-center mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"submit\",\n          type: \"submit\",\n          onClick: reviewOrder,\n          className: \"btn btn-primary\",\n          value: \"Review and Submit Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(checkout, \"0K+5co/+aT3hE9igFUyB3lYP084=\");\n\nexport default checkout;","map":{"version":3,"sources":["/Users/helenjiang/Desktop/ChefBoOnline/ChefBoOnlineOrder/chefbo/pages/routes/checkout.js"],"names":["React","useState","useContext","useEffect","moment","momentz","store","router","useRouter","addCustomerInfo","setTips","FULL12FORMAT","DATEFORMAT","TIMEZONE","checkout","lunch","getState","lunchInCart","lunchSpecialHours","hoursOfOperation","today","tz","day","date","format","todayClose2","length","open","isBefore","validTimesOne","validDays","validTimesTwo","dateOne","dateTwo","dateTwoDay","dayOneOpen1","dayOneClose1","dayOneOpen2","dayOneClose2","dayTwoOpen1","dayTwoClose1","dayTwoOpen2","dayTwoClose2","push","add","availablePickUpTimes","concat","startTime","endTime","timeArr","mins","minute","firstTime","tipsPercent","calcTips","subtotal","tips","forEach","i","toFixed","console","log","dateChange","setDateChange","times","setTimes","timeChange","setTime","tipsSelection","SetTipsSelection","fnameError","setFnameError","lnameError","setLnameError","emailError","setEmailError","phoneError","setPhoneError","tipsError","setTipsError","handleDateChange","e","target","value","handleTimeChange","reviewOrder","preventDefault","form","elements","fname","lname","email","phone","req","fetch","method","headers","body","JSON","stringify","json","validEmail","customer","time","dispatch","parseFloat","map","ind"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport moment from \"moment\";\nimport momentz from \"moment-timezone\"\nimport store from \"../../state/GlobalState\";\nimport router, { useRouter } from \"next/router\";\nimport { addCustomerInfo, setTips } from \"../../state/Actions\";\n\n\n\nconst FULL12FORMAT = \"dddd MM-DD-YY HH:mm\";\nconst DATEFORMAT = \"dddd MM-DD-YY\";\nconst TIMEZONE = \"America/Los_Angeles\";\n\nconst checkout = () => {\n  // const closedDays = [\"11/25/2021\", \"12/25/2021\", \"07/04/2022\"]\n  const lunch = store.getState().lunchInCart > 0\n  const lunchSpecialHours = [\n    [],\n    [\"11:00\", \"15:00\"],\n    [\"11:00\", \"15:00\"],\n    [\"11:00\", \"15:00\"],\n    [\"11:00\", \"15:00\"],\n    [\"11:00\", \"15:00\"],\n    [\"12:00\", \"15:00\"],\n  ];\n  \n  var hoursOfOperation = [\n    [], //change!!!\n    [\"11:00\", \"15:00\", \"16:30\", \"21:00\"],\n    [\"11:00\", \"15:00\", \"16:30\", \"21:00\"],\n    [\"11:00\", \"15:00\", \"16:30\", \"21:00\"],\n    [\"11:00\", \"15:00\", \"16:30\", \"21:00\"],\n    [\"11:00\", \"15:00\", \"16:30\", \"21:30\"],\n    [\"12:00\", \"15:00\", \"16:30\", \"21:30\"],\n  ];\n\n  if(lunch > 0)\n    hoursOfOperation = lunchSpecialHours;\n\n  var today = (moment(moment()).tz(TIMEZONE))\n  var day = today.day(); //number\n  var date = today.format(DATEFORMAT); //string\n  var todayClose2 = moment.tz(`${date} ${hoursOfOperation[day][hoursOfOperation[day].length - 1]}`, FULL12FORMAT, TIMEZONE);\n  var open = today.isBefore(todayClose2);\n  var validTimesOne = [];\n  var validDays = [];\n  var validTimesTwo = [];\n  var dateOne;\n  var dateTwo;\n  var dateTwoDay;\n  var dayOneOpen1, dayOneClose1, dayOneOpen2, dayOneClose2;\n  var dayTwoOpen1, dayTwoClose1, dayTwoOpen2, dayTwoClose2;\n\n  //today is open!\n  if (open) {\n    validDays.push(`Today (${date})`);\n    dateOne = date;\n    dayOneOpen1     = moment.tz(`${dateOne} ${hoursOfOperation[day][0]}`, FULL12FORMAT, TIMEZONE)\n    dayOneClose1    = moment.tz(`${dateOne} ${hoursOfOperation[day][1]}`, FULL12FORMAT, TIMEZONE)\n    dayOneOpen2     = moment.tz(`${dateOne} ${hoursOfOperation[day][2]}`, FULL12FORMAT, TIMEZONE)\n    dayOneClose2    = moment.tz(`${dateOne} ${hoursOfOperation[day][3]}`, FULL12FORMAT, TIMEZONE)\n\n\n    day == 6? dateTwo = today.add(2, \"days\") : dateTwo = today.add(1, \"days\");\n    dateTwoDay = dateTwo.day()\n    dateTwo = dateTwo.format(DATEFORMAT)\n    validDays.push(dateTwo);\n\n\n    dayTwoOpen1     = moment.tz(`${dateTwo} ${hoursOfOperation[dateTwoDay][0]}`, FULL12FORMAT, TIMEZONE)\n    dayTwoClose1    = moment.tz(`${dateTwo} ${hoursOfOperation[dateTwoDay][1]}`, FULL12FORMAT, TIMEZONE)\n    dayTwoOpen2     = moment.tz(`${dateTwo} ${hoursOfOperation[dateTwoDay][2]}`, FULL12FORMAT, TIMEZONE)\n    dayTwoClose2    = moment.tz(`${dateTwo} ${hoursOfOperation[dateTwoDay][3]}`, FULL12FORMAT, TIMEZONE)\n\n    today = (moment(moment()).tz(TIMEZONE)) //reset today\n    if (today.isBefore(dayOneOpen1)) { //store still open today\n\n        validTimesOne = availablePickUpTimes(dayOneOpen1, dayOneClose1)\n\n    } else {\n\n        validTimesOne = availablePickUpTimes(today, dayOneClose1)\n\n    }\n    validTimesOne = validTimesOne.concat(availablePickUpTimes(dayOneOpen2, dayOneClose2));\n\n    validTimesTwo = availablePickUpTimes(dayTwoOpen1, dayTwoClose1);\n\n    validTimesTwo = validTimesTwo.concat(availablePickUpTimes(dayTwoOpen2, dayTwoClose2));\n\n  } else {\n    day == 6? dateOne = today.add(2, \"days\"): dateOne = today.add(1, \"days\");\n    day = dateOne.day();\n    dateOne = dateOne.format(DATEFORMAT)\n    validDays.push(dateOne);\n    dayOneOpen1     = moment.tz(`${dateOne} ${hoursOfOperation[day][0]}`, FULL12FORMAT, TIMEZONE)\n    dayOneClose1    = moment.tz(`${dateOne} ${hoursOfOperation[day][1]}`, FULL12FORMAT, TIMEZONE)\n    dayOneOpen2     = moment.tz(`${dateOne} ${hoursOfOperation[day][2]}`, FULL12FORMAT, TIMEZONE)\n    dayOneClose2    = moment.tz(`${dateOne} ${hoursOfOperation[day][3]}`, FULL12FORMAT, TIMEZONE)\n\n\n    dateTwo = today.add(1, \"days\")\n    dateTwoDay = dateTwo.day()\n    dateTwo = dateTwo.format(DATEFORMAT)\n    validDays.push(dateTwo);\n    dayTwoOpen1     = moment.tz(`${dateTwo} ${hoursOfOperation[dateTwoDay][0]}`, FULL12FORMAT, TIMEZONE)\n    dayTwoClose1    = moment.tz(`${dateTwo} ${hoursOfOperation[dateTwoDay][1]}`, FULL12FORMAT, TIMEZONE)\n    dayTwoOpen2     = moment.tz(`${dateTwo} ${hoursOfOperation[dateTwoDay][2]}`, FULL12FORMAT, TIMEZONE)\n    dayTwoClose2    = moment.tz(`${dateTwo} ${hoursOfOperation[dateTwoDay][3]}`, FULL12FORMAT, TIMEZONE)\n\n    \n    validTimesOne = availablePickUpTimes(dayOneOpen1, dayOneClose1);\n    validTimesOne = validTimesOne.concat(availablePickUpTimes(dayOneOpen2, dayOneClose2));\n    validTimesTwo = availablePickUpTimes(dayTwoOpen1, dayTwoClose1);\n    validTimesTwo = validTimesTwo.concat(availablePickUpTimes(dayTwoOpen2, dayTwoClose2));\n  }\n\n  function availablePickUpTimes(startTime, endTime) {\n\n    var timeArr = [];\n\n    const mins = 15 - (startTime.minute() % 15);\n    var firstTime = startTime.add(mins, \"m\");\n    mins == 15 ? null : firstTime.add(15, \"m\");\n\n    while (firstTime.isBefore(endTime)) {\n        timeArr.push(new moment(firstTime).format(\"h:mm a\"));\n        firstTime.add(15, \"m\");\n    }\n    return timeArr;\n  }\n\n  const tipsPercent = [0, 12, 15, 18, 20, 22]\n\n  function calcTips (){\n    const {  subtotal } = store.getState();\n\n    var tips = [];\n    tipsPercent.forEach((i) =>{\n        tips.push((subtotal*(i/100)).toFixed(2))\n    })\n\n    console.log(tips)\n    return tips;\n\n  }\n\n  const [dateChange, setDateChange] = useState(0);\n  const [times, setTimes] = useState(validTimesOne);\n  const [timeChange, setTime] = useState(validTimesOne[0]);\n  const [tipsSelection, SetTipsSelection] = useState([\"\"]);\n  const [fnameError, setFnameError] = useState(\"\");\n  const [lnameError, setLnameError] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [phoneError, setPhoneError] = useState(\"\");\n  const [tipsError,  setTipsError ] = useState(\"\");\n\n\n\n  useEffect(() => {\n    SetTipsSelection(calcTips())\n      \n    dateChange == 0? setTimes(validTimesOne) : setTimes(validTimesTwo)\n\n  }, [dateChange]);\n\n  function handleDateChange(e) {\n    setDateChange(e.target.value);\n  }\n\n  function handleTimeChange(e) {\n    setTime(e.target.value);\n  }\n\n\n  async function reviewOrder(e) {\n    //check if payment is valid\n\n    e.preventDefault();\n\n    var tips = e.target.form.elements.tips.value;\n    var fname = e.target.form.elements.fname.value;\n    var lname = e.target.form.elements.lname.value;\n    var email = e.target.form.elements.email.value;\n    var phone = e.target.form.elements.phone.value;\n\n    if(!fname || !lname || !email || !phone || !tips){\n        if(!fname) \n        {\n            setFnameError(\"Required!!\")\n        }\n        else{\n            setFnameError(\"\")\n\n        }\n        if(!lname) \n        {\n            setLnameError(\"Required!!\")\n        }\n        else\n        {\n            setLnameError(\"Required!!\")\n\n        }\n        if(!email) \n        {\n            setEmailError(\"Required!!\")\n        }\n        else{\n            const req = fetch('http://localhost:5001/validate-email', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(email)\n            });\n            const validEmail = await req.json()\n            console.log(validEmail)\n            if(!validEmail){\n                setEmailError(\"Invalid Email\")\n            }\n            else{\n                setEmailError(\"\")\n            }\n\n        }\n        if(!phone )\n        {\n            setPhoneError(\"Required!!\")\n        }\n        else{\n            setPhoneError(\"\")\n\n        }\n        if(!tips) \n        {\n            setTipsError(\"Required!!\")\n        }\n        else{\n            setTipsError(\"\")\n\n        }\n    }\n    else\n    {\n        \n        setFnameError(\"\")\n        setLnameError(\"\")\n        setEmailError(\"\")\n        setPhoneError(\"\")\n        setTipsError(\"\") \n\n      const customer = {\n        fname: fname,\n        lname: lname,\n        email: email,\n        phone: phone,\n        time: timeChange,\n       \n      };\n\n      dateChange == 0 ? (customer.date = dateOne) : (customer.date = dateTwo);\n\n      store.dispatch(setTips(parseFloat(tips)));\n\n      store.dispatch(addCustomerInfo(customer));\n      router.push(\"/routes/submit\");\n    }\n\n  }\n\n  return (\n    <div className=\"col-12 col-sm-8 col-lg-6 m-auto\">\n      <form className=\"form\">\n        <div className=\"form-group\">\n          <label className=\"\" htmlFor=\"day\">\n            Select Pick Up Date\n          </label>\n          <select\n            name=\"day\"\n            className=\"form-control\"\n            onChange={handleDateChange}\n          >\n            {validDays.map((i, ind) => (\n              <option key={ind} value={ind}>\n                {i}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"form-group\">\n          <label className=\"\" htmlFor=\"time\">\n            Select a Time\n          </label>\n          <select\n            name=\"time\"\n            className=\"form-control\"\n            onChange={handleTimeChange}\n          >\n            {times.map((i, ind) => (\n              <option key={ind} value={`${i}`}>\n                {i}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col mb-2\">\n            <label htmlFor=\"fname\"> First Name* <span className=\"text-danger\">{lnameError}</span></label>\n            <input name=\"fname\" type=\"text\" className=\"form-control\" required />\n          </div>\n\n          <div className=\"col\">\n            <label htmlFor=\"lname\"> Last Name* <span className=\"text-danger\">{fnameError}</span></label>\n            <input name=\"lname\" type=\"text\" className=\"form-control\" required />\n          </div>\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"email\"> Email* <span className=\"text-danger\">{emailError}</span></label>\n          <input name=\"email\" id=\"email\" type=\"email\" pattern=\"^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$\" className=\"form-control\" required />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"phone\"> Phone number (digits only)* <span className=\"text-danger\">{phoneError}</span></label>\n          <input\n            id=\"phone\"\n            name=\"phone\"\n            type=\"tel\"\n            pattern=\"[0-9]{3}[0-9]{3}[0-9]{4}\"\n            className=\"form-control\"\n            required\n          />\n        </div>\n\n        <div className=\"\">\n            <p>Select Tip Amount <span className=\"text-danger\">{tipsError}</span></p>\n            <div className=\"input-group\">\n\n            {tipsSelection.map((i, ind) =>(\n\n                <div className=\"form-check w-50\" key={ind}>\n                    \n                    <input\n                    className=\"form-check-input\"\n                      name=\"tips\"\n                      id={i}\n                      type=\"radio\"\n                      value={i}\n                      aria-label={`Radio tips amount ${tipsPercent[ind]}%`}\n                      required\n                    />\n                    <label>{`${i} (${tipsPercent[ind]}%)`}</label>\n                </div>\n\n            ))}\n\n            </div>\n        </div>\n\n        <div className=\"form-group d-flex justify-content-center mt-3\">\n        <input id=\"submit\" type=\"submit\" onClick={reviewOrder} className=\"btn btn-primary\" value=\"Review and Submit Order\"/>\n        {/* <label htmlFor=\"submit\">Review and Submit Order</label> */}\n          {/* <button\n            type=\"submit\"\n            className=\"btn btn-primary\"\n            onClick={reviewOrder}\n          >\n            Review and Submit Order\n          </button> */}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default checkout;\n"]},"metadata":{},"sourceType":"module"}